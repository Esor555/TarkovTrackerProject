classDiagram
    class IService~T~ {
        +GetAll(): List~T~
        +Add(T item)
        +Remove(int id)
    }

    class IRepository~T~ {
        +GetAll(): List~T~
        +Add(T item)
        +GetById(int id): T
        +Delete(int id)
    }

    class IValidator~T~ {
        ~Validate(T item)
        ~ValidateId(int id)
    }

    class Program{
        +Main()
    }
    
    class User {
        - id: int
        - name: string
        - level: int
        - faction: Faction
    }

    class UserService {
        -UserRepository repository 
        -UserValidator validator
        +UpdateUserName(User user, string newName)
        +UpdateUserLevel(User user, int newLevel)
        +UpdateUserFaction(User user, Faction newFaction)
    }
    
    class UserRepository {
        -users: list<User>
    }

    class UserValidator {
        ~ValidateName(string name)
        ~ValidateLevel(int level)
        ~ValidateFaction(Faction faction)
    }

    class Hideout {
        - name: string
        - id: int
        - level: int
        - levelupRequirement: RequirementHideout
    }

    class HideoutService {
        -HideoutRepository repository
        -HideoutValidator validator
        +UpgradeHideout(Hideout hideout)
    }

    class HideoutRepository {
        -hideouts: list<Hideout>
    }

    class HideoutValidator {
        ~ValidateName(string name)
        ~ValidateLevel(int level)
    }

    class Task {
        - name: string
        - id: int
        - description: string
        - unlockRequirements: RequirementTask
        - completionRequirements: RequirementTask
    }

    class TaskService {
        -TaskRepository repository
        -TaskValidator validator
        +CompleteTask(Task task)
    }

    class TaskRepository {
        -tasks: list<Task>
    }

    class TaskValidator {
        ~ValidateRequirements(RequirementTask requirement)
    }

    class Item {
        - name: string
        - id: int
    }

    class Faction {
        <<enumeration>>
        USAC
        BEAR
    }

    Program --> IService
    IService <|-- UserService
    IService <|-- HideoutService
    IService <|-- TaskService

    IRepository <|-- UserRepository
    IRepository <|-- HideoutRepository
    IRepository <|-- TaskRepository

    IValidator <|-- UserValidator
    IValidator <|-- HideoutValidator
    IValidator <|-- TaskValidator

    UserService --> UserRepository
    UserService --> UserValidator
    UserRepository --> User
    UserValidator -- User
    
    HideoutService --> HideoutRepository
    HideoutService --> HideoutValidator
    HideoutRepository --> Hideout
    HideoutValidator -- Hideout

    TaskService --> TaskRepository
    TaskService --> TaskValidator
    TaskRepository --> Task
    TaskValidator -- Task

    User --> Faction
    User --> Task : "currentTasks"
    User --> Hideout : "currentHideout"
    User --> Item : "currentItems"
